(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{1290:(e,t,s)=>{Promise.resolve().then(s.bind(s,2177)),Promise.resolve().then(s.bind(s,3134))},2177:(e,t,s)=>{"use strict";s.d(t,{ClientHeader:()=>j,ClientSidebar:()=>v});var a=s(4078),l=s(1774),r=s(1470),i=s(4826),n=s.n(i),o=s(3449),c=s(5926),d=s(192),u=s(411),h=s(7627),p=s(2426),x=s(7255),m=s(8757),g=s(9202),f=s(1300);let v=()=>{let[e,t]=(0,l.useState)(!1),s=[{title:"Templates",icon:d.A,href:"/dashboard/ads-library",active:!0},{title:"Explore",icon:u.A,href:"/dashboard/explore",badge:"Coming soon"},{title:"All Saved",icon:h.A,href:"/dashboard/saved"},{title:"Collections",icon:p.A,href:"/dashboard/collections",badge:"Coming soon"},{title:"Subscription",icon:x.A,href:"/dashboard/subscription"}],i=[{title:"FAQ & Support",icon:m.A,href:"/support"},{title:"Follow @staticadtemplates",icon:g.A,href:"https://twitter.com/staticflowio"}];return(0,a.jsxs)("div",{className:(0,c.cn)("fixed inset-y-0 left-0 w-64 bg-white border-r z-50 transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static",e?"translate-x-0":"-translate-x-full"),children:[e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 z-40 lg:hidden",onClick:()=>t(!1)}),(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)(n(),{href:"/",className:"flex items-center gap-2",children:(0,a.jsx)(r.default,{src:"/images/staticads-logo.png",alt:"staticads logo",width:180,height:60,className:"h-10 w-auto"})})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:s.map(e=>(0,a.jsxs)(n(),{href:e.href,className:(0,c.cn)("flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors",e.active?"bg-purple-100 text-purple-900":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.title}),e.badge&&(0,a.jsx)("span",{className:"ml-auto text-xs bg-gray-100 px-2 py-0.5 rounded-full",children:e.badge})]},e.title))}),(0,a.jsx)("div",{className:"p-4 border-t space-y-1",children:i.map(e=>(0,a.jsxs)(n(),{href:e.href,className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm text-gray-600 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.title})]},e.title))})]})]})},j=()=>{let[e,t]=(0,l.useState)(!1);return(0,a.jsx)("div",{className:"h-14 border-b flex items-center justify-between px-4 lg:px-6",children:(0,a.jsx)(o.Button,{variant:"outline",size:"sm",className:"lg:hidden p-2",onClick:()=>t(!0),children:(0,a.jsx)(f.A,{className:"w-5 h-5"})})})}},3134:(e,t,s)=>{"use strict";s.d(t,{default:()=>q});var a=s(4078),l=s(1774),r=s(1305),i=s(7869),n=s(5687),o=s(9409),c=s(9405),d=s(9724),u=s(5926);function h(e){let{...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"select",...t})}function p(e){let{...t}=e;return(0,a.jsx)(n.WT,{"data-slot":"select-value",...t})}function x(e){let{className:t,size:s="default",children:l,...r}=e;return(0,a.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":s,className:(0,u.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[l,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(o.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:l="popper",...r}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{"data-slot":"select-content",className:(0,u.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...r,children:[(0,a.jsx)(f,{}),(0,a.jsx)(n.LM,{className:(0,u.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(v,{})]})})}function g(e){let{className:t,children:s,...l}=e;return(0,a.jsxs)(n.q7,{"data-slot":"select-item",className:(0,u.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(c.A,{className:"size-4"})})}),(0,a.jsx)(n.p4,{children:s})]})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(d.A,{className:"size-4"})})}function v(e){let{className:t,...s}=e;return(0,a.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(o.A,{className:"size-4"})})}var j=s(3449),y=s(7175),b=s(5395),w=s(9947),N=s(7186);async function A(e){try{var t;let s=new URL("/api/ads-proxy",window.location.origin);s.searchParams.set("pageId",e.page_id.toString());let a=((null===(t=e.external_sorting[0])||void 0===t?void 0:t.orderBy)||"desc").toLowerCase();s.searchParams.set("sort",a),s.searchParams.set("scope","all");let l={industryFilters:e.industry,typeFilters:e.type,ratioFilters:e.ratio};console.log("[queryAds] POST",s.toString(),"body:",l);let r=await fetch(s.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!r.ok){let e=await r.text();throw Error("HTTP error! status: ".concat(r.status,", message: ").concat(e))}let i=await r.json(),n=i;i&&"SUCCESS"===i.code&&i.data&&(n=i.data);let o=n.ads||n.templates||n.items||n.results||[],c=n.total||n.totalCount||n.total_count||n.count||o.length,d=n.page||n.currentPage||n.current_page||e.page_id,u=n.totalPages||n.total_pages||n.pages||Math.ceil(c/20);return{ads:Array.isArray(o)?o:[],total_count:c,current_page:d,total_pages:u}}catch(e){throw console.error("Error in queryAds:",e),e}}async function S(e){let t=[e.id,e.template_id,e.templateId,e._id,e.id_str].filter(e=>null!=e).map(e=>String(e).trim().replace(/^"+|"+$/g,"")).filter((e,t,s)=>e.length>0&&s.indexOf(e)===t);if(0===t.length)throw Error("Unable to retrieve Canva link");for(let e of t)try{var s;let t=new URL("/api/canva-link",window.location.origin);t.searchParams.set("id",e),console.log("[getCanvaLinkForAd] GET",t.toString());let a=await fetch(t.toString(),{method:"GET"});if(console.log("[getCanvaLinkForAd] status:",a.status),!a.ok)continue;let l=await a.json(),r=null==l?void 0:l.canvaLink,i=null==l?void 0:null===(s=l.data)||void 0===s?void 0:s.canvaLink;if(r&&"string"==typeof r)return r;if(i&&"string"==typeof i)return i}catch(t){console.warn("[getCanvaLinkForAd] candidate failed:",e,t);continue}throw Error("Unable to retrieve Canva link")}let _=0,C=new Map,k=e=>{if(C.has(e))return;let t=setTimeout(()=>{C.delete(e),O({type:"REMOVE_TOAST",toastId:e})},1e6);C.set(e,t)},T=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?k(s):e.toasts.forEach(e=>{k(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},E=[],I={toasts:[]};function O(e){I=T(I,e),E.forEach(e=>{e(I)})}function z(e){let{...t}=e,s=(_=(_+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>O({type:"DISMISS_TOAST",toastId:s});return O({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>O({type:"UPDATE_TOAST",toast:{...e,id:s}})}}let P=[{id:1,name:"Fashion Sale Ad",url:"https://xn7q-nefz-qhlj.n7d.xano.io/vault/r4fM_Vz3/g2m59I9d7g-YmqpoMVMYY8Zk1Uk/fwcAIA../1058.webp",canva_url:"https://www.canva.com/design/template1",industry:"Fashion & Accessories",type:"Offer/Sale",ratio:"1:1 (Square)",created_at:"2024-01-01",is_free:!0},{id:2,name:"Health Product Ad",url:"https://xn7q-nefz-qhlj.n7d.xano.io/vault/r4fM_Vz3/UDtt5pmNhO3cV9XP3egdF_iz8jw/yYzudg../1057.webp",canva_url:"https://www.canva.com/design/template2",industry:"Health & Wellness",type:"Before & After",ratio:"1:1 (Square)",created_at:"2024-01-02",is_free:!1}];function U(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[n,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[u,f]=(0,l.useState)(!0),[v,_]=(0,l.useState)({page_id:1,industry:[],type:[],ratio:[],external_sorting:[{sortBy:"created_at",orderBy:"desc"}],saved_ads:!1,free_ads:!1}),{toast:C}=function(){let[e,t]=l.useState(I);return l.useEffect(()=>(E.push(t),()=>{let e=E.indexOf(t);e>-1&&E.splice(e,1)}),[e]),{...e,toast:z,dismiss:e=>O({type:"DISMISS_TOAST",toastId:e})}}(),k=(0,l.useRef)(!1),T=e=>{var t,s,a,l,r;return String(null!==(r=null!==(l=null!==(a=null!==(s=null!==(t=e.id)&&void 0!==t?t:e.template_id)&&void 0!==s?s:e.templateId)&&void 0!==a?a:e._id)&&void 0!==l?l:e.id_str)&&void 0!==r?r:Math.random().toString(36).slice(2))},U=async()=>{let e=1===v.page_id;try{d(null),e&&!k.current?r(!0):o(!0);let s=await A(v),a=Array.isArray(s.ads)?s.ads:[];f(a.length>0),e?t(a):t(e=>{let t=new Set(e.map(T)),s=a.filter(e=>!t.has(T(e)));return e.concat(s)})}catch(e){d(e instanceof Error?e.message:"An unexpected error occurred"),1===v.page_id?(t(P),f(!1)):(f(!1),C({title:"Could not load more ads",description:"Please try again later.",variant:"destructive"}))}finally{e&&!k.current?(r(!1),k.current=!0):o(!1)}};(0,l.useEffect)(()=>{U()},[v.page_id,v.industry,v.type,v.ratio,v.external_sorting]);let F=(e,s)=>{f(!0),t([]),_(t=>({...t,[e]:s&&s!=="All ".concat(e.charAt(0).toUpperCase()+e.slice(1),"s")?[s]:[],page_id:1}))},D=async e=>{var t,s,a,l;null!==(l=null!==(a=null!==(s=null!==(t=e.id)&&void 0!==t?t:e.template_id)&&void 0!==s?s:e.templateId)&&void 0!==a?a:e._id)&&void 0!==l||e.id_str;try{let t=await S(e);window.open(t,"_blank","noopener,noreferrer")}catch(e){C({title:"Unable to open Canva link",description:"We couldn’t retrieve the Canva link for this template. Please try again later.",variant:"destructive"})}},B=e=>e(),L=e=>{var t;return e.url||(null===(t=e.visual)||void 0===t?void 0:t.url)||e.thumbnail||e.image||e.preview_url||"/placeholder.svg"},M=e=>e.name||e.title||"Ad Template ".concat(T(e)),q=e=>{let t=e.type||e.template_type||e.category||"Template",s=e.ratio||e.aspect_ratio||"Unknown";return"".concat(t," • ").concat(s)},R=e=>e.brand||null,V=e=>e.is_free||e.free||!e.premium||!1;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Ad library"}),(0,a.jsx)(i.tU,{defaultValue:"ads",className:"w-auto",children:(0,a.jsxs)(i.j7,{children:[(0,a.jsx)(i.Xi,{value:"ads",children:"Ads"}),(0,a.jsx)(i.Xi,{value:"emails",children:"Emails"}),(0,a.jsx)(i.Xi,{value:"landers",children:"Landers"})]})})]}),(0,a.jsxs)("div",{className:"px-6 py-3 border-t flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(h,{value:v.industry[0]||"All Industries",onValueChange:e=>F("industry",e),children:[(0,a.jsx)(x,{className:"w-[180px]",children:(0,a.jsx)(p,{placeholder:"Industry"})}),(0,a.jsxs)(m,{children:[(0,a.jsx)(g,{value:"All Industries",children:"All Industries"}),(0,a.jsx)(g,{value:"Fashion & Accessories",children:"Fashion & Accessories"}),(0,a.jsx)(g,{value:"Food",children:"Food"}),(0,a.jsx)(g,{value:"Health & Wellness",children:"Health & Wellness"}),(0,a.jsx)(g,{value:"Electronics",children:"Electronics"}),(0,a.jsx)(g,{value:"Pets",children:"Pets"}),(0,a.jsx)(g,{value:"Home & Furniture",children:"Home & Furniture"}),(0,a.jsx)(g,{value:"Skincare",children:"Skincare"}),(0,a.jsx)(g,{value:"Saas/Apps",children:"SaaS/Apps"}),(0,a.jsx)(g,{value:"Self Care",children:"Self Care"}),(0,a.jsx)(g,{value:"Sports Outdoor",children:"Sports & Outdoor"}),(0,a.jsx)(g,{value:"Finance",children:"Finance"}),(0,a.jsx)(g,{value:"Education",children:"Education"}),(0,a.jsx)(g,{value:"Kids Baby",children:"Kids/Baby"})]})]}),(0,a.jsxs)(h,{value:v.type[0]||"All Types",onValueChange:e=>F("type",e),children:[(0,a.jsx)(x,{className:"w-[180px]",children:(0,a.jsx)(p,{placeholder:"Type"})}),(0,a.jsxs)(m,{children:[(0,a.jsx)(g,{value:"All Types",children:"All Types"}),(0,a.jsx)(g,{value:"Before & After",children:"Before & After"}),(0,a.jsx)(g,{value:"Feature/Benefit",children:"Feature/Benefit"}),(0,a.jsx)(g,{value:"Article/News",children:"Article/News"}),(0,a.jsx)(g,{value:"Apple Notes",children:"Apple Notes"}),(0,a.jsx)(g,{value:"Statistics",children:"Statistics"}),(0,a.jsx)(g,{value:"Us vs Them",children:"Us vs Them"}),(0,a.jsx)(g,{value:"Bold Claim",children:"Bold Claim"}),(0,a.jsx)(g,{value:"Native",children:"Native"}),(0,a.jsx)(g,{value:"Offer/Sale",children:"Offer/Sale"}),(0,a.jsx)(g,{value:"Testimonial",children:"Testimonial"}),(0,a.jsx)(g,{value:"Negative Hook",children:"Negative Hook"}),(0,a.jsx)(g,{value:"Google Search",children:"Google Search"}),(0,a.jsx)(g,{value:"What's Inside",children:"What's Inside"}),(0,a.jsx)(g,{value:"AirDrop",children:"AirDrop"}),(0,a.jsx)(g,{value:"Headline",children:"Headline"}),(0,a.jsx)(g,{value:"Meme",children:"Meme"}),(0,a.jsx)(g,{value:"Problem + Solution",children:"Problem + Solution"})]})]}),(0,a.jsxs)(h,{value:v.ratio[0]||"All Ratios",onValueChange:e=>F("ratio",e),children:[(0,a.jsx)(x,{className:"w-[180px]",children:(0,a.jsx)(p,{placeholder:"Ratio"})}),(0,a.jsxs)(m,{children:[(0,a.jsx)(g,{value:"All Ratios",children:"All Ratios"}),(0,a.jsx)(g,{value:"1:1 (Square)",children:"1:1"}),(0,a.jsx)(g,{value:"9:16 (Vertical)",children:"16:9"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.Button,{variant:"outline",onClick:()=>{f(!0),t([]),_(e=>({...e,industry:[],type:[],ratio:[],page_id:1}))},children:"Clear filters"}),(0,a.jsxs)(h,{defaultValue:"created_at-desc",onValueChange:e=>{let[s,a]=e.split("-");f(!0),t([]),_(e=>({...e,external_sorting:[{sortBy:s,orderBy:a}],page_id:1}))},children:[(0,a.jsx)(x,{className:"w-[180px]",children:(0,a.jsx)(p,{placeholder:"Sort: Newest"})}),(0,a.jsxs)(m,{children:[(0,a.jsx)(g,{value:"created_at-desc",children:"Newest"}),(0,a.jsx)(g,{value:"created_at-asc",children:"Oldest"})]})]})]})]}),c&&1===v.page_id&&(0,a.jsxs)("div",{className:"px-6 py-2 bg-red-50 border-y border-red-100 text-sm text-red-600 flex justify-between items-center",children:[(0,a.jsxs)("span",{children:["API Error: ",c," (Showing fallback data)"]}),(0,a.jsxs)(j.Button,{onClick:()=>{d(null),t([]),f(!0),_(e=>({...e,page_id:1}))},variant:"outline",size:"sm",className:"text-red-600 border-red-600 bg-transparent",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Retry"]})]})]}),(0,a.jsx)("div",{className:"flex-1 p-6 overflow-auto",children:s?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsx)(b.A,{className:"w-8 h-8 animate-spin text-purple-600"})}):e.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(e=>{var t,s,l,r,i;let n=null!==(i=null!==(r=null!==(l=null!==(s=null!==(t=e.id)&&void 0!==t?t:e.template_id)&&void 0!==s?s:e.templateId)&&void 0!==l?l:e._id)&&void 0!==r?r:e.id_str)&&void 0!==i?i:Math.random();return(0,a.jsxs)("div",{className:"group relative flex flex-col rounded-lg border bg-white overflow-hidden",children:[(0,a.jsxs)("div",{className:"aspect-square relative overflow-hidden",children:[(0,a.jsx)("img",{src:L(e)||"/placeholder.svg",alt:M(e),className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:e=>{e.target.src="/placeholder.svg?height=300&width=300"}}),V(e)&&(0,a.jsx)("div",{className:"absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"Free"}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:[(0,a.jsxs)(j.Button,{variant:"outline",size:"sm",className:"mr-2",onClick:()=>D(e),children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Open in Canva"]}),(0,a.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:()=>B(()=>{navigator.clipboard.writeText(L(e))}),children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Copy"]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm truncate",title:M(e),children:M(e)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:q(e)}),R(e)&&(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",title:R(e),children:R(e)})]})]},n)})}),(0,a.jsx)("div",{className:"flex justify-center items-center mt-8 pb-6",children:(0,a.jsx)(j.Button,{onClick:()=>{u&&!n&&_(e=>({...e,page_id:e.page_id+1}))},disabled:!u||n,className:"bg-[#7C3AED] hover:bg-[#6D28D9] text-white",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2 animate-spin"})," Loading more..."]}):u?"Load more":"No more results"})})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No ads found."})})]})}var F=s(1468),D=s(7255),B=s(493),L=s(9054),M=s(5705);function q(){let{user:e}=(0,r.A)(),[t,s]=(0,l.useState)(!0),[i,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{(async()=>{if(s(!0),!e){n(!1),s(!1);return}try{let t=await (0,L.Ld)(e);n(t)}catch(e){console.error("Error checking access:",e),n(!1)}finally{s(!1)}})()},[e]),t)?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)(b.A,{className:"h-8 w-8 animate-spin text-purple-600"})}):e?i?(0,a.jsx)(U,{}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen p-8",children:[(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)(D.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Upgrade Required"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2",children:["Hi ",e.email,"! You need a paid subscription to access our premium ads library."]}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Upgrade now to unlock 1900+ high-converting ad templates."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(j.Button,{onClick:()=>u(!0),className:"bg-[#7C3AED] hover:bg-[#6D28D9] text-white w-full",children:"Upgrade to Premium"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"7-day free trial • Cancel anytime"})]}),!1]}),(0,a.jsx)(M.A,{isOpen:d,onClose:()=>u(!1),onSubscriptionSuccess:()=>{u(!1),window.location.reload()}})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen p-8",children:[(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)(F.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Sign In Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to sign in to access the ads library. Create an account or sign in to continue."}),(0,a.jsx)(j.Button,{onClick:()=>c(!0),className:"bg-[#7C3AED] hover:bg-[#6D28D9] text-white",children:"Sign In / Sign Up"})]}),(0,a.jsx)(B.L,{isOpen:o,onClose:()=>c(!1),onSignupSuccess:()=>{c(!1)}})]})}},9054:(e,t,s)=>{"use strict";s.d(t,{Ld:()=>r,l3:()=>l});var a=s(4127);async function l(e){if(!(null==e?void 0:e.email))return console.log("No user or email provided"),"free";console.log("=== getUserPlan called (read-only) ==="),console.log("User email:",e.email),console.log("User ID:",e.id);try{console.log("Querying profiles table for email:",e.email);let t=(0,a.U)(),{data:s,error:l}=await t.from("profiles").select("*").eq("email",e.email).limit(1);if(console.log("Supabase query result:"),console.log("- Error:",l),console.log("- Data:",s),console.log("- Data length:",null==s?void 0:s.length),l)return console.error("Error fetching user plan:",l),"free";if(s&&s.length>0){let t=s[0].plan||"free";return console.log("Returning plan for ".concat(e.email,": ").concat(t)),t}return console.log("No profile found. Returning 'free' without creating a profile."),"free"}catch(e){return console.error("Unexpected error in getUserPlan:",e),"free"}}async function r(e){if(console.log("=== hasAccessToAdsLibrary called ==="),!e)return console.log("No user provided, access denied"),!1;console.log("Checking access for user:",e.email);try{let t=await l(e);console.log("User ".concat(e.email," has plan: ").concat(t));let s="paid"===t;return console.log("Access to ads library: ".concat(s)),s}catch(e){return console.error("Error checking ads library access:",e),!1}}}},e=>{var t=t=>e(e.s=t);e.O(0,[344,793,141,768,559,304,632,657,147,358],()=>t(1290)),_N_E=e.O()}]);